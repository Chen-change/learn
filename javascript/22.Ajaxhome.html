<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>省市区</title>
</head>
<body>
    <select  id="province"> <option>---请选择省份---</option> </select>
    <select  id="city"> <option>---请选择城市---</option> </select>
    <select  id="area"> <option>---请选择市区---</option> </select>
    <script>
        var province=document.getElementById("province")
        var city=document.getElementById("city")
        var area=document.getElementById("area")
        var option=document.getElementsByTagName("option")
        var xmlhttp=new XMLHttpRequest();//创建对象
        window.onload=function(){
            xmlhttp.open("get","php/province.php",true) //get到后端的省份信息
            xmlhttp.send(null)
            xmlhttp.onreadystatechange=function(){
                if(xmlhttp.readyState==4&&xmlhttp.status==200){
                    var provinces=xmlhttp.responseText
                    var provincesArr=provinces.split(",") //切割字符串
                    for(var i=0;i<provincesArr.length;i++){  //省份的选择
                        var option=document.createElement("option");
                        province.appendChild(option) //这一步是增对象
                        option.innerHTML=provincesArr[i]
                    }

                }
            }
            //城市的请求
            province.onchange=function(){
                city.innerHTML="---请选择城市---";
                var provinceValue=province.value
                xmlhttp.open("post","php/city.php",true)
                xmlhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded")
                xmlhttp.send("provinceName="+provinceValue)
                xmlhttp.onreadystatechange=function(){ 
                    if(xmlhttp.readyState==4&&xmlhttp.status==200){
                        var cities=xmlhttp.responseText;
                        console.log(cities)
                        var citiesArr=cities.split(",") //切割
                            for(var i=0;i<citiesArr.length;i++){  //省份的选择
                            var option=document.createElement("option");
                            city.appendChild(option) //这一步是增对象
                            option.innerHTML=citiesArr[i]  //里面的对象没有清空 ，按照增删改查 我们需要在前面清空每次的选择数据
                        }
                        
                    }  
                }
                //市区的请求
                city.onchange=function(){
                    area.innerHTML="<option>---请选择市区---</option>";
                    var cityValue=city.value;
                    xmlhttp.open("post","php/area.php",true);
                    xmlhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded")
                    xmlhttp.send("cityName="+cityValue);
                    xmlhttp.onreadystatechange=function(){ 
                        if(xmlhttp.readyState==4&&xmlhttp.status==200){
                            var areas=xmlhttp.responseText;
                            console.log(areas);
                            var areasArr=areas.split(","); //切割
                            for(var i=0;i<areasArr.length;i++){  //省份的选择
                            var option=document.createElement("option");
                            area.appendChild(option) //这一步是增对象
                            option.innerHTML=areasArr[i]  //里面的对象没有清空 ，按照增删改查 我们需要在前面清空每次的选择数据
                            }
                        }
                    }
                }
            }
            
        }

    </script>
</body>

</html>