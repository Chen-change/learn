<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ajax</title>
    <style>

    </style>
</head>
<body>
    <h1>我是线上项目</h1>
    <div>看看我呀看看我</div>
    <h2 id="txt"></h2>
    <input type="text" id="user" onblur="loadHobby()">
    <script>
        var txt=document.getElementById("txt")
        var user=document.getElementById("user")
        /*Ajax(XMLHttpRequest): 前端向后端异步的取数据的而无需刷新页面技术
        使用Ajax的步骤
        */
       function loadHobby(){
            //1.创建Ajax核心对象
            var xmlhttp=new XMLHttpRequest();
            /*2.创建请求 xmlhttp.open("请求方式","请求地址","是否异步")*/
            // xmlhttp.open("get","php/1.php?type="+user.value,true)  get请求发送 但一般是用post 更安全
            xmlhttp.open("post","php/1.php",true)
            //3.发送请求参数 只能是post请求,key=value形式的字符串 多个参数之间以&连接
            //如果请求方式为get,那么请求参数写在请求地址后面,以?连接,send里传null
            // xmlhttp.send(null) get请求时传递null
            //注意：如果请求方式为post，那么需要设置请求头
            xmlhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded") //post请求需要请求头，这一段需要死记硬背
            xmlhttp.send("type="+user.value)
            //4.接收响应
                    //readyState 当前请求的状态 0尚未初始化 1正在发送请求 2.请求完毕 3.正在响应 4响应完毕
                    //status 服务器返回的状态码 404 200(成功) 500(服务器错误) 
                    //onreadystatechange
                xmlhttp.onreadystatechange=function(){
                    if(xmlhttp.readyState==4&&xmlhttp.status==200){
                        var data=xmlhttp.responseText;
                        txt.innerHTML=data;//这就把来自后端的数据传递到前端去了
                    }
                }
       }
       
    </script>
</body>
</html>